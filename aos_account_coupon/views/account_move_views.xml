<?xml version="1.0" encoding="utf-8"?>
<odoo>
   <record id="account_move_view_form" model="ir.ui.view">
         <field name="name">account.move.form.inherit.coupon</field>
         <field name="model">account.move</field>
         <field name="inherit_id" ref="account.view_move_form"/>
         <field name="priority">10</field>
         <field name="arch" type="xml">
            <xpath expr="//field[@name='invoice_line_ids']" position="after">
                <div class="oe_right" attrs="{'invisible':['|',('move_type','!=','out_invoice'),('state','!=','draft')]}">
                    <button name="%(aos_account_coupon.account_coupon_apply_code_action)d" class="btn btn-secondary"
                            string="Coupon" type="action" groups="base.group_user"/>
                    <button name="recompute_coupon_lines" class="btn btn-secondary" string="Promotions"
                            help="When clicked, the content of the order will be checked to detect (and apply) possible promotion programs."
                            type="object"/>
                </div>
            </xpath>
             <xpath expr="//field[@name='tax_totals_json']" position="before">
                    <label for="total_reward" class="text-left w-100"  attrs="{'invisible':[('total_reward','=',0)]}"/>
                    <field name="total_reward" nolabel="1" style="width:77%;" attrs="{'invisible':[('total_reward','=',0)]}"/> 
                </xpath>
            <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='tax_ids']" position="before">
                <field name="is_reward_line" widget="boolean_toggle" readonly="1" force_save="1"/>
                <field name="coupon_name" optional="hide"  readonly="1" force_save="1"/>
            </xpath>
         </field>
    </record>

</odoo>
