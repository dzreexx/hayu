<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Inherited Tax form -->
    <!-- <record id="view_tax_form_withholding_tax" model="ir.ui.view">
        <field name="name">account.tax.form.withholding.tax</field>
        <field name="model">account.tax</field>
        <field name="inherit_id" ref="account.view_tax_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='company_id']" position="after">
                <field name="is_withholding" />
            </xpath>
        </field>
    </record> -->

    <!-- <record id="view_tax_form_expenses_tax" model="ir.ui.view">
        <field name="name">account.tax.form.expenses.tax</field>
        <field name="model">account.tax</field>
        <field name="inherit_id" ref="account.view_tax_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='price_include']" position="after">
                <field name="is_expenses" />
            </xpath>
        </field>
    </record> -->
		
    
    <record id="view_partner_property_form_taxes" model="ir.ui.view">
        <field name="name">res.partner.account.form.dos</field>
        <field name="model">res.partner</field>
	    <field name="inherit_id" ref="aos_partner_taxes.view_partner_property_form_taxes"/>
	    <field name="arch" type="xml">		
    		<field name="supplier_taxes_id" position="after">
				<field name="taxes_wth_id" widget="many2many_tags"/>
	        	<field name="supplier_taxes_wth_id" widget="many2many_tags"/>
	    	</field>
	    </field>
	</record>
    
    <!-- <record id="view_invoice_tax_tree_wth" model="ir.ui.view">
        <field name="name">account.invoice.tax.tree</field>
        <field name="model">account.invoice.tax</field>
        <field name="inherit_id" ref="account.view_invoice_tax_tree"/>
        <field name="arch" type="xml">
            <field name="sequence" position="after">
                <field name="is_withholding" />
            </field>
        </field>
    </record> -->
    
     <!-- <record id="view_order_form_withholding_tax" model="ir.ui.view">
        <field name="name">sale.order.form</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='order_line']/form/field[@name='tax_id']" position="attributes">
                <attribute name="domain">[('type_tax_use','=','sale'),('company_id', '=', parent.company_id),('is_withholding','=',False)]</attribute>
            </xpath>
			<xpath expr="//field[@name='order_line']/form/field[@name='tax_id']" position="after">
				<field name="tax_wth_id" attrs="{'invisible': [('amount_wth_line', '!=', 0.0)]}" widget="many2many_tags" options="{'no_create': True}" context="{'type':parent.type, 'tree_view_ref': 'account.account_tax_view_tree', 'search_view_ref': 'account.account_tax_view_search'}"
					domain="[('type_tax_use','=','sale'),('is_withholding','=',True),('company_id', '=', parent.company_id)]" />
				<field name="amount_wth_line" invisible="1"/>
			</xpath>
            <xpath expr="//field[@name='order_line']/tree/field[@name='tax_id']" position="attributes">
                <attribute name="domain">[('type_tax_use','=','sale'),('company_id', '=', parent.company_id),('is_withholding','=',False)]</attribute>
            </xpath>
			<xpath expr="//field[@name='order_line']/tree/field[@name='tax_id']" position="after">
				<field name="tax_wth_id" attrs="{'column_invisible': [('amount_wth_line', '!=', 0.0)]}" widget="many2many_tags" options="{'no_create': True}" context="{'type':parent.type, 'tree_view_ref': 'account.account_tax_view_tree', 'search_view_ref': 'account.account_tax_view_search'}"
					domain="[('type_tax_use','=','sale'),('is_withholding','=',True),('company_id', '=', parent.company_id)]" />
				<field name="amount_wth_line" invisible="1"/>
			</xpath>
        </field>
    </record> -->
    
    <record id="view_invoice_line_taxes_form" model="ir.ui.view">
        <field name="name">account.move.line.form</field>
        <field name="model">account.move.line</field>
        <field name="inherit_id" ref="account.view_move_line_tree"/>
        <field name="arch" type="xml">
        	<field name="tax_ids" position="after">
        		<field name="invoice_line_wth_tax_ids" widget="many2many_tags" options="{'no_create': True}" 
                    context="{'move_type':parent.move_type, 'tree_view_ref': 'account.account_tax_view_tree', 'search_view_ref': 'account.account_tax_view_search'}"
                    optional="hide"/>
				<field name="amount_wth_line" optional="hide"/>
                <!-- <field name="invoice_line_oth_ids" widget="many2many_tags" optional="hide"/>
				<field name="amount_oth_line" optional="hide"/>
                <field name="tax_amount_json" optional="hide"/> -->
        	</field>
        </field>
    </record>
    
    <record id="invoice_form_withholding_tax" model="ir.ui.view">
        <field name="name">account.move.form.withholding.tax</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='tax_totals_json']" position="before">
                <label for="invoice_wth_tax_ids" class="text-left w-100"/>
                <field name="invoice_wth_tax_ids" widget="many2many_tags" 
                    domain="[('type_tax_use', '=?', invoice_filter_type_domain), ('company_id', '=', company_id), ('country_id', '=', tax_country_id),('is_withholding','=',True)]"
                    nolabel="1" style="width:77%;" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"/>
                <label for="amount_tax_wth" class="text-left w-100"/>
            	<field name="amount_tax_wth" nolabel="1" style="width:77%;"/>
            </xpath>
            <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='tax_ids']" position="attributes">
                <attribute name="domain">[('type_tax_use', '=?', parent.invoice_filter_type_domain), ('company_id', '=', parent.company_id), ('country_id', '=', parent.tax_country_id),('is_withholding','=',False)]</attribute>
            </xpath>
			<xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='tax_ids']" position="after">
				<field name="invoice_line_wth_tax_ids" widget="many2many_tags" options="{'no_create': True}" context="{'tree_view_ref': 'account.account_tax_view_tree', 'search_view_ref': 'account.account_tax_view_search'}"
					domain="[('type_tax_use', '=?', parent.invoice_filter_type_domain), ('company_id', '=', parent.company_id), ('country_id', '=', parent.tax_country_id),('is_withholding','=',True)]" 
                    optional="hide"/>
				<field name="amount_wth_line" optional="hide"/>
                <!-- <field name="invoice_line_oth_ids" widget="many2many_tags" optional="hide"/>
				<field name="amount_oth_line" optional="hide"/>
                <field name="tax_amount_json" optional="hide"/> -->
			</xpath>
			<xpath expr="//field[@name='line_ids']/tree/field[@name='tax_ids']" position="after">
				<field name="invoice_line_wth_tax_ids" widget="many2many_tags" options="{'no_create': True}" context="{'tree_view_ref': 'account.account_tax_view_tree', 'search_view_ref': 'account.account_tax_view_search'}"
					domain="[('type_tax_use', '=?', parent.invoice_filter_type_domain), ('company_id', '=', parent.company_id), ('country_id', '=', parent.tax_country_id),('is_withholding','=',True)]"
                    optional="hide"/>
				<field name="amount_wth_line" optional="hide"/>
                <!-- <field name="invoice_line_oth_ids" widget="many2many_tags" optional="hide"/>
				<field name="amount_oth_line" optional="hide"/>
                <field name="tax_amount_json" optional="hide"/> -->
			</xpath>
        </field>
    </record>
    
    <!-- <record id="invoice_supplier_form_withholding_tax" model="ir.ui.view">
        <field name="name">account.invoice.supplier.form.withholding.tax</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="account.invoice_supplier_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='tax_ids']" position="attributes">
                <attribute name="domain">[('type_tax_use','=','purchase'),('company_id', '=', parent.company_id),('is_withholding','=',False)]</attribute>
            </xpath>
        </field>
    </record> -->
    
</odoo>