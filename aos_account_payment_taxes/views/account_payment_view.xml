<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>    
		<record id="view_account_payment_line_tree_aos_taxes" model="ir.ui.view">
			<field name="name">account.payment.line.tree</field>
			<field name="model">account.payment.line</field>
			<field name="inherit_id" ref="aos_account_payment.view_account_payment_line_tree_aos"/>
			<field name="arch" type="xml">                
				<xpath expr="//field[@name='amount_to_pay']" position="after">
					<field name="tax_type" invisible="1"/>
					<field name="payment_line_wth_tax_ids"  widget="many2many_tags" options="{'no_create': True}" context="{'tree_view_ref': 'account.account_tax_view_tree', 'search_view_ref': 'account.account_tax_view_search'}"
						domain="[('type_tax_use','=',tax_type),('is_withholding','=',True)]" />
					<field name="amount_wth_tax" invisible="1"  attrs="{'invisible': [('payment_line_wth_tax_ids', '=', False)]}" readonly="1"/>
				</xpath>                    
			</field>
		</record>
		
		<record id="view_payment_tax_tree" model="ir.ui.view">
			<field name="name">account.payment.tax.tree</field>
			<field name="model">account.payment.tax</field>
			<field name="arch" type="xml">
				<tree string="Manual Payment Taxes">
					<field name="sequence"/>
					<field name="manual"/>
					<field name="name"/>
					<field name="account_id" groups="account.group_account_user"/>
					<field name="base"/>
					<field name="amount_total" string="Amount"/>
					<field name="currency_id" invisible="1"/>
				</tree>
			</field>
		</record>

		<record id="view_payment_tax_form" model="ir.ui.view">
			<field name="name">account.payment.tax.form</field>
			<field name="model">account.payment.tax</field>
			<field name="arch" type="xml">
				<form string="Manual Invoice Taxes">
					<group col="4">
						<field name="name"/>
						<field name="sequence"/>
						<field name="account_id" groups="account.group_account_user"/>
						<field name="account_analytic_id" domain="[('company_id', '=', parent.company_id)]" groups="analytic.group_analytic_accounting"/>
						<field name="manual"/>
						<field name="amount_total" string="Amount"/>
						<field name="base"/>
						<field name="currency_id" invisible="1"/>
					</group>
				</form>
			</field>
		</record>
		
		<record id="view_account_payment_form_inherited" model="ir.ui.view">
			<field name="name">account.payment.wth.taxes.form</field>
			<field name="model">account.payment</field>
			<field name="inherit_id" ref="aos_account_payment.view_account_payment_form_aos"/>
			<field name="arch" type="xml">                
				<xpath expr="//page" position="after">
					<page string="Withholding Taxes &amp; Other Expense">
						<field name="tax_line_ids">
							<tree editable="bottom" string="Taxes">
								<field name="name"/>
								<!--Need invisible fields for on_change to create all necessary info -->
								<!-- <field name="payment_line_id" invisible="0"/> -->
								<field name="tax_id" invisible="1"/>
								<field name="sequence" invisible="1"/>
								<field name="manual" invisible="1"/>
								<field name="already_select_for_invoice" invisible="1"/>
								<field name="account_id" groups="account.group_account_user"/>
								<field name="account_analytic_id" domain="[('company_id', '=', parent.company_id)]" groups="analytic.group_analytic_accounting"/>
								<field name="analytic_tag_ids" groups="analytic.group_analytic_tags" widget="many2many_tags" options="{'color_field': 'color'}"/>
								<field name="amount" sum="Amount"/>
								<field name="amount_rounding" invisible="1"/>
								<field name="amount_total" invisible="1"/>
								<field name="currency_id" invisible="1" force_save="1"/>
							</tree>
						</field>	                    	
					</page>
				</xpath>                    
			</field>
		</record>
                    
     </data>
 </odoo>

