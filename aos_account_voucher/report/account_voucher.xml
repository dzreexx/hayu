<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="paperformat_lowmargin_payment_voucher" model="report.paperformat">
        <field name="name">A5 For Payment Voucher Report</field>
        <field name="default" eval="False" />
        <field name="format">A5</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Landscape</field>
        <field name="margin_top">3</field>
        <field name="margin_bottom">3</field>
        <field name="margin_left">7</field>
        <field name="margin_right">7</field>
        <field name="header_line" eval="False" />
        <field name="header_spacing">10</field>
        <field name="dpi">90</field>
    </record>

    <report
        id="action_report_account_voucher"
        model="account.voucher"
        string="Voucher"
        report_type="qweb-pdf"
        name="aos_account_voucher.report_account_voucher"
        file="aos_account_voucher.report_account_voucher"
        paperformat="aos_account_voucher.paperformat_lowmargin_payment_voucher"
    />
    
    <template id="footer_template">
                <div class="" style="width:100%;">
                    <div class="table1" style="display:inline-block; width:510px;">
                        <table class="table table-borderless text-center">
                            <tr>
                                <td style="border:1px solid #000; padding:3px; width:103px;">Mengetahui</td>
                                <td style="border:1px solid #000; padding:3px; width:103px;">Diperiksa</td>
                                <td style="border:1px solid #000; padding:3px; width:103px;">Menyetujui</td>
                                <td style="border:1px solid #000; padding:3px; width:103px;">Accounting</td>
                                <td style="border:1px solid #000; padding:3px;">Kasir</td>
                            </tr>
                            <tr>
                                <td style="border:1px solid #000;" height="50"></td>
                                <td style="border:1px solid #000;" height="50"></td>
                                <td style="border:1px solid #000;" height="50"></td>
                                <td style="border:1px solid #000;" height="50"></td>
                                <td style="border:1px solid #000;" height="50"></td>
                            </tr>
                            <tr>
                                <td style="border:1px solid #000;"></td>
                                <td style="border:1px solid #000;"></td>
                                <td style="border:1px solid #000;"></td>
                                <td style="border:1px solid #000;"></td>
                                <td style="border:1px solid #000;"></td>
                            </tr>
                        </table>
                    </div>

                    <div class="float-right" style="width:240px;">
                        <table class="table table-borderless">
                            <tr>
                                <td row="2" style="padding:0;">Bogor,<t t-esc="context_timestamp(datetime.datetime.today()).strftime('%d-%m-%Y')"/> <br/> Diterima Oleh,</td>
                            </tr>
                            <tr>
                                <td height="60"></td>
                            </tr>
                            <tr>
                                <td style="border-bottom:1px solid #000;"></td>
                            </tr>
                        </table>
                    </div>
                </div>
    </template>

    <template id="report_account_voucher">
        <t t-call="web.html_container">
            <t t-call="web.basic_layout">
                <t t-foreach="docs" t-as="doc">
                    <div class="page">
                        <div class="title" style="width:100%;">
                            <t t-if="doc.voucher_type == 'purchase'">
                                <h4 style="display:inline-block; margin:auto;">Bukti Pengeluaran Uang Kas/Bank</h4>
                            </t>
                            <t t-else="">
                                <h4 style="display:inline-block; margin:auto;">Bukti Penerimaan Uang Kas/Bank</h4>
                            </t>

                            <div class="float-right" style="width:400px;">
                                <table class="table table-borderless" style="border:1px solid #000;">
                                    <tr>
                                        <td style="padding:0; width:105px;">No Bukti </td>
                                        <td style="padding:0;">: </td>
                                    </tr>
                                    <tr>
                                        <td style="padding:0; width:105px;">Cek/Giro No</td>
                                        <td style="padding:0;">: </td>
                                    </tr>
                                    <tr>
                                        <td style="padding:0; width:105px;">No Voucher</td>
                                        <td style="padding:0;">: </td>
                                    </tr>
                                    <tr>
                                        <td style="padding:0; width:105px;">Tanggal</td>
                                        <td style="padding:0;">: <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d-%m-%Y')"/></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div style="clear:right;"></div>
                        <div style="margin-top:-20px;">
                            <table class="table table-borderless" style="width:100%;">
                                <tr>
                                    <td style="padding:0; width:150px;">Dibayar Kepada </td>
                                    <td style="padding:0;">: <span t-field="doc.partner_id.name"/></td>
                                </tr>
                                <tr>
                                    <td style="padding:0; width:150px;">Jumlah Uang (IDR) </td>
                                    <td style="padding:0;">: <span t-esc="'{0:,.2f}'.format(doc.amount)"/></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td style="padding:0;"> (<t t-esc="doc._get_num2words(doc.amount)"/>)</td>
                                </tr>
                            </table>
                        </div>
                        <table class="table table-borderless" style="width:100%;">
                            <tr align="center">
                                <th style="padding:2px; width:20px; border:1px solid #000;">No</th>
                                <th style="padding:2px; border:1px solid #000;">Keterangan</th>
                                <th style="padding:2px; width:20px; border:1px solid #000;">D/K</th>
                                <th style="padding:2px; border:1px solid #000;">Jumlah(IDR)</th>
                            </tr>
                            <t t-set="number" t-value="0"/>
                            <t t-foreach="doc.line_ids" t-as="line">
                                <tr>
                                    <td style="padding:2px; border:1px solid #000;" align="center">
                                        <t t-set="number" t-value="number + 1"/>
                                        <t t-esc="number"/>
                                    </td>
                                    <td style="padding:2px; border:1px solid #000;">
                                        <span t-field="line.name"/>
                                    </td>
                                    <td style="padding:2px; border:1px solid #000;" align="center">
                                        <t t-if="doc.voucher_type == 'purchase' ">
                                            K
                                        </t>
                                        <t t-else="">
                                            D
                                        </t>
                                    </td>
                                    <td style="padding:2px; border:1px solid #000;" align="right">
                                        <span t-esc="'{0:,.2f}'.format(line.price_subtotal)"/>
                                    </td>
                                </tr>
                            </t>
                            <tr>
                                <td style="padding:2px; border:1px solid #000;"></td>
                                <td style="padding:2px; padding-right:4px; border:1px solid #000;" align="right">Total</td>
                                <td style="padding:2px; border:1px solid #000;"></td>
                                <td style="padding:2px; border:1px solid #000; margin-right:10px;" align="right">
                                    <span t-esc="'{0:,.2f}'.format(doc.amount)"/>
                                </td>
                            </tr>
                        </table>
                        <t t-call="aos_account_voucher.footer_template"/>   
                    </div>
                </t>
            </t>
        </t>
    </template>

</odoo>