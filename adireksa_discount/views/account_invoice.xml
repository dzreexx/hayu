<odoo>
    <data>

        <record id="view_account_invoice_diskon_inherit" model="ir.ui.view">
            <field name="name">view.account.invoice.diskon.inherit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">

                <xpath expr="//notebook/page[1]/group" position="after">
                    <group>
                        <group>
                            <field name="diskon" widget="many2many_tags" domain="['&amp;', ('state', '=', 'approved'), ('aktifkan_diskon', '=', True), ('kelas_customer_id', '=', kelas_customer_id)]"
                                   attrs="{'invisible': [('diskon_bool', '=', False)], 'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="diskon_bool" invisible="1"/>
                            <field name="kelas_customer_id" invisible="1"/>
                        </group>
                        <group>

                        </group>
                    </group>
                </xpath>

                <xpath expr="//notebook/page[1]/group[last()]" position="inside">
                    <field name="discount_lines" widget="monetary" options="{'currency_field': 'currency_id'}" readonly="1" groups="adireksa_discount.group_diskon_per_so_line1"/>
                    <field name="discount_amount" widget='monetary' options="{'currency_field': 'currency_id'}" />
                </xpath>

                <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='tax_ids']" position="after">
                    <field name="diskon_ids" widget="many2many_tags" groups="adireksa_discount.group_diskon_per_so_line1"/>
                    <field name="diskon_total" options="{'currency_field': 'currency_id'}" groups="adireksa_discount.group_diskon_per_so_line1" invisible="1"/>
                </xpath>

            </field>
        </record>


    </data>
</odoo>